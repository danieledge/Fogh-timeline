<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline with Console Logging</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #f5f0eb; 
            padding: 20px; 
        }
        #debug { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            margin-bottom: 20px; 
            font-family: monospace; 
            white-space: pre-wrap; 
        }
    </style>
</head>
<body>
    <div id="debug">Debug Log:
    </div>
    
    <h1>Gipsy Hill Historical Timeline</h1>
    <p>Discover the fascinating history of our community from ancient settlements to modern day</p>
    
    <div id="timeline-items"></div>
    
    <script>
        const debug = document.getElementById('debug');
        const log = (msg) => {
            debug.textContent += '\n' + new Date().toISOString().substr(11, 8) + ' - ' + msg;
            console.log(msg);
        };
        
        log('Page loaded, starting script...');
        
        try {
            log('Creating Timeline module...');
            
            const Timeline = (() => {
                log('Inside Timeline IIFE');
                
                const timelineData = [
                    {
                        date: "Test Date 1",
                        title: "Test Title 1",
                        description: "Test Description 1",
                        icon: "house"
                    },
                    {
                        date: "Test Date 2",
                        title: "Test Title 2", 
                        description: "Test Description 2",
                        icon: "crown"
                    }
                ];
                
                log('Timeline data created with ' + timelineData.length + ' items');
                
                const createTimelineItem = (item, index) => {
                    log('Creating timeline item ' + index);
                    const div = document.createElement('div');
                    div.style.background = 'white';
                    div.style.padding = '20px';
                    div.style.margin = '20px 0';
                    div.style.borderRadius = '10px';
                    div.innerHTML = '<h3>' + item.date + ': ' + item.title + '</h3><p>' + item.description + '</p>';
                    return div;
                };
                
                const generateTimeline = () => {
                    log('generateTimeline called');
                    const container = document.getElementById('timeline-items');
                    
                    if (!container) {
                        log('ERROR: Timeline container not found!');
                        return;
                    }
                    
                    log('Container found, generating items...');
                    
                    timelineData.forEach((item, index) => {
                        const element = createTimelineItem(item, index);
                        container.appendChild(element);
                    });
                    
                    log('Timeline generation complete!');
                };
                
                const init = () => {
                    log('init called, document.readyState = ' + document.readyState);
                    
                    if (document.readyState === 'loading') {
                        log('Document still loading, adding DOMContentLoaded listener');
                        document.addEventListener('DOMContentLoaded', generateTimeline);
                    } else {
                        log('Document already loaded, calling generateTimeline directly');
                        generateTimeline();
                    }
                };
                
                log('Returning Timeline object');
                return { init };
            })();
            
            log('Timeline module created, calling init...');
            Timeline.init();
            log('Timeline.init() called successfully');
            
        } catch (error) {
            log('ERROR: ' + error.message);
            log('Stack: ' + error.stack);
        }
        
        log('Script execution complete');
    </script>
</body>
</html>